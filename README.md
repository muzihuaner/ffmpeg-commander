# 快点FFmpeg命令生成器

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Stars](https://img.shields.io/badge/stars-%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90-brightgreen)]()

专业的FFmpeg命令生成器，支持单文件和批量处理，包含视频编码、音频处理、滤镜效果、直播推流等完整功能。

## 🎯 主要功能

### 📹 视频处理
- **视频编码**：支持H.264、H.265、VP9等多种编码器
- **音频编码**：支持AAC、MP3、Opus等多种音频格式
- **视频滤镜**：
  - 亮度、对比度、饱和度调整
  - 翻转、旋转、裁剪、缩放
  - 实时预览命令效果
- **音频滤镜**：
  - 音量调整
  - 淡入淡出效果
  - 音频标准化
  - 回声效果
- **快速预设**：
  - 📝 默认转换
  - 📺 YouTube优化
  - 🌐 Web优化
  - 📱 移动设备适配
  - 💎 高质量输出
  - 📦 小体积压缩
  - 🎨 GIF动图
  - 🎵 提取音频
  - 🎬 仅保留视频
  - 📸 截图
  - 🔗 视频合并
  - 📡 流媒体格式

### 🎙️ 直播推流
- **推流源支持**：
  - 本地文件推流
  - 摄像头实时直播
  - 桌面录屏推流
  - RTSP流推送
  - UDP流推送
- **推流平台预设**：
  - 📱 Twitch
  - 📺 YouTube Live
  - 👍 Facebook Live
  - 🎬 B站直播
  - ⚙️ 自定义RTMP服务器
  - 📡 HLS流媒体
- **推流配置**：
  - 多种协议支持（RTMP、RTMPS、HLS、DASH、HTTP、UDP）
  - 视频编码配置
  - 音频编码配置
  - 实时缓冲调整
  - 循环推流

### 📁 批量处理
- **跨平台支持**：Windows、macOS、Linux
- **自动化脚本生成**：
  - 批量处理脚本自动生成
  - 递归子目录搜索
  - 并行处理支持
  - 自定义输出文件名格式
- **灵活配置**：
  - 文件模式匹配
  - 输入输出目录管理
  - 单个或并行处理模式

## 💻 快速开始

### 在线使用
直接在浏览器中打开 `index.html` 文件即可使用，无需安装任何依赖。

```bash
# 如果需要启动本地服务器
python -m http.server 8000
# 或
npx http-server
```

然后访问 `http://localhost:8000`

### 基本步骤
1. **配置输入输出**：设置输入文件和输出文件名
2. **选择预设或自定义**：
   - 点击快速预设按钮快速配置
   - 或手动调整各项参数
3. **查看生成的命令**：右侧命令输出框实时显示
4. **复制命令**：点击"复制"按钮复制到剪贴板
5. **执行命令**：在终端中运行复制的命令

## 📖 详细使用指南

### 视频处理示例

#### 示例1：转换为YouTube格式
1. 点击"快速预设"中的"📺 YouTube"
2. 设置输入文件：`my-video.mp4`
3. 设置输出文件：`output.mp4`
4. 复制命令并执行

#### 示例2：压缩视频体积
1. 点击"📦 小体积"预设
2. 可选地在"视频滤镜"中调整分辨率
3. 调整"音频编码"中的比特率
4. 生成并执行命令

#### 示例3：提取视频中的音频
1. 点击"🎵 提取音频"预设
2. 输出文件自动设为 `output.mp3`
3. 复制命令执行

#### 示例4：视频编辑（旋转、裁剪、缩放）
1. 在"视频滤镜"部分进行调整
2. 使用"旋转"下拉菜单旋转视频
3. 填写"裁剪宽度/高度"进行裁剪
4. 填写"缩放宽度/高度"进行缩放

### 直播推流示例

#### 示例1：推流到Twitch
1. 切换到"📡 直播推流"标签页
2. 点击"📱 Twitch"预设
3. 将"推流地址"中的 `{stream_key}` 替换为你的Twitch推流密钥
4. 选择输入源（文件、摄像头或桌面）
5. 复制命令执行

#### 示例2：摄像头直播
1. 在"推流源配置"中选择"摄像头"
2. 输入摄像头设备（Windows: `video="Camera"`, macOS: `0`, Linux: `/dev/video0`）
3. 选择推流平台预设
4. 配置推流地址
5. 执行命令开始直播

#### 示例3：桌面录屏推流
1. 在"推流源配置"中选择"桌面录屏"
2. 输入桌面捕获参数
3. 配置其他参数
4. 执行命令

### 批量处理示例

#### 示例1：批量转换视频格式
1. 勾选"📁 批量处理模式"
2. 选择目标平台（Windows/macOS/Linux）
3. 设置输入目录（如：`C:\Videos`）
4. 设置输出目录（如：`C:\Videos\Output`）
5. 配置视频处理参数
6. 脚本自动生成
7. 复制脚本代码，保存为 `.bat`（Windows）或 `.sh`（Unix）
8. 执行脚本开始批量处理

#### 示例2：递归处理子目录
1. 勾选"批量处理模式"
2. 勾选"递归搜索子目录"
3. 设置文件类型匹配（如：`*.mp4`）
4. 配置其他参数并生成脚本

## 🛠️ 功能详解

### 基础配置
| 参数 | 说明 | 示例 |
|------|------|------|
| 输入文件 | 源视频文件路径 | `input.mp4` |
| 输出文件 | 输出文件路径 | `output.mp4` |
| 开始时间 | 从指定时间开始处理 | `00:01:30` |
| 持续时间 | 处理指定时长 | `00:05:00` |

### 视频编码参数
| 参数 | 说明 | 推荐值 |
|------|------|--------|
| 编码器 | 视频编码算法 | libx264（H.264） |
| CRF质量 | 质量值，0-51，值越小质量越好 | 23（默认） |
| 编码速度 | 编码速度与质量的平衡 | medium |
| 比特率 | 输出视频码率 | 1000-5000k |
| 帧率 | 每秒帧数 | 30fps |
| 分辨率 | 输出分辨率 | 1920x1080 |

### 音频编码参数
| 参数 | 说明 | 推荐值 |
|------|------|--------|
| 编码器 | 音频编码算法 | aac |
| 比特率 | 音频码率 | 128k |
| 声道 | 单声道或立体声 | 2（立体声） |

### 视频滤镜

#### 色彩调整
- **亮度**：-100 到 100
- **对比度**：-100 到 100
- **饱和度**：-100 到 100

#### 变换操作
- **水平翻转**：沿Y轴翻转
- **垂直翻转**：沿X轴翻转
- **旋转**：90°/180°/270°

#### 缩放和裁剪
- **裁剪**：指定宽度和高度裁剪中心内容
- **缩放**：调整分辨率（支持纵横比自动计算）

### 音频滤镜

#### 音量处理
- **音量调整**：0-200%，100%为原音量
- **淡入淡出**：指定持续时间
- **标准化**：自动调整到标准音量
- **回声效果**：添加回声效果

## 📋 快速预设说明

### 视频预设
| 预设 | 场景 | 输出格式 | 编码器 | 特点 |
|------|------|--------|--------|------|
| 默认转换 | 通用 | mp4 | 自动 | 无特殊设置 |
| YouTube | 视频分享 | mp4 | H.264 | 优化的YouTube兼容性 |
| Web优化 | 网页播放 | webm | VP9 | 小体积，好兼容性 |
| 移动设备 | 手机播放 | mp4 | H.264 | 480p分辨率 |
| 高质量 | 存档保存 | mkv | H.265 | 最高质量 |
| 小体积 | 传输分享 | mp4 | H.264 | CRF35压缩 |
| GIF | 制作动图 | gif | - | 15fps帧率 |
| 提取音频 | 音乐提取 | mp3 | MP3 | 192k比特率 |
| 仅视频 | 去除音频 | mp4 | 原编码 | 无音轨 |
| 截图 | 获取封面 | png | - | 单帧截图 |
| 合并 | 视频拼接 | mp4 | copy | 无重编码 |
| 流媒体 | HLS流 | m3u8 | H.264 | 直播格式 |

## 🔧 高级功能

### 自定义参数
在"高级选项"中的"自定义参数"字段中添加额外的FFmpeg参数，例如：
```
-ss 00:00:10 -t 00:00:30 -pix_fmt yuv420p
```

### 快速启动
勾选"快速启动"以在mp4文件开始处放置元数据，使视频能更快开始播放。

### 覆盖输出
勾选"覆盖输出"使用 `-y` 参数自动覆盖已存在的输出文件。

### 批量处理配置
- **输出文件名格式**：
  - `{name}_out.{ext}` - 原文件名_out.扩展名
  - `{name}_converted.{ext}` - 原文件名_converted.扩展名
  - `converted_{name}.{ext}` - converted_原文件名.扩展名
  - `{name}.{ext}` - 覆盖原文件（谨慎使用）

- **并行处理**：同时处理多个文件，加快处理速度（Linux/macOS）

## 📦 系统要求

### 必需
- **FFmpeg**：需要在系统路径中安装FFmpeg
  - [FFmpeg官方下载](https://ffmpeg.org/download.html)
  - [安装指南](install-guide.html)

### 推荐
- Windows 7 或更高版本 / macOS 10.12+ / Linux
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 足够的磁盘空间用于视频处理

## 🚀 常见问题

### Q1: 如何安装FFmpeg？
请参考项目中的 [安装指南](install-guide.html)。

### Q2: 为什么生成的命令执行后没有反应？
- 检查FFmpeg是否正确安装
- 确保输入文件路径正确
- 确保有输出目录的写入权限
- 查看FFmpeg的错误信息

### Q3: 如何获得最佳的视频质量？
- 使用"💎 高质量"预设
- 或手动设置：
  - 编码器：libx265（H.265）
  - CRF：18-20
  - 编码速度：slow

### Q4: 如何减少视频文件大小？
- 使用"📦 小体积"预设
- 或手动设置：
  - 编码器：libx264
  - CRF：35-40
  - 分辨率：640x360 或更低
  - 音频比特率：64k

### Q5: 批量处理脚本如何执行？
- **Windows**：
  1. 右键点击 `.bat` 文件
  2. 选择"以管理员身份运行"
  或在命令行中执行：`batch-script.bat`

- **macOS/Linux**：
  1. 打开终端
  2. 执行：`bash batch-script.sh`
  或：`chmod +x batch-script.sh && ./batch-script.sh`

### Q6: 推流到Twitch时提示连接失败？
- 检查网络连接是否正常
- 确保推流密钥正确
- 查看防火墙设置
- 确认FFmpeg支持RTMP协议

### Q7: 摄像头直播时无法识别摄像头？
- **Windows**：运行 `ffmpeg -list_devices true -f dshow -i dummy` 列出设备
- **macOS**：运行 `ffmpeg -f avfoundation -list_devices true -i ""`
- **Linux**：检查 `/dev/video*` 设备

### Q8: 支持哪些视频格式？
支持FFmpeg支持的所有格式，包括：
- 视频：MP4、MKV、AVI、MOV、WebM、FLV、TS等
- 音频：MP3、AAC、WAV、FLAC、Opus等
- 流媒体：HLS、DASH、RTMP等

## 💡 使用技巧

1. **预览命令**：在右侧始终可以看到将要执行的完整FFmpeg命令
2. **快速试验**：使用快速预设快速尝试不同的转换方式
3. **保存配置**：手动记录常用的参数组合
4. **分步处理**：对于复杂的处理，可以多次调用FFmpeg
5. **监控进度**：执行命令时可以看到FFmpeg的进度信息

## 📝 示例命令

### 转换为H.265编码
```bash
ffmpeg -i input.mp4 -c:v libx265 -crf 28 -c:a aac output.mp4
```

### 提取视频前30秒
```bash
ffmpeg -i input.mp4 -t 00:00:30 output.mp4
```

### 调整视频分辨率和码率
```bash
ffmpeg -i input.mp4 -s 1280x720 -b:v 2000k output.mp4
```

### 推流到RTMP服务器
```bash
ffmpeg -i input.mp4 -c:v libx264 -preset fast -b:v 2500k -c:a aac -b:a 128k -f flv rtmp://server/app/key
```

### 批量转换（Windows）
```batch
@echo off
for %%f in (*.mp4) do ffmpeg -i "%%f" -c:v libx264 "%%~nf_out.mp4"
```

## 🤝 贡献

欢迎提交Issue和Pull Request来改进本项目！

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🔗 相关资源

- [FFmpeg官方文档](https://ffmpeg.org/documentation.html)
- [FFmpeg维基](https://trac.ffmpeg.org/wiki)
- [H.264编码指南](https://trac.ffmpeg.org/wiki/Encode/H.264)
- [音频处理指南](https://trac.ffmpeg.org/wiki/Encode/HighQualityAudio)

## 📞 反馈与支持

如有问题或建议，欢迎通过以下方式联系：
- 提交Issue
- 发送反馈建议
- 分享使用心得

---

